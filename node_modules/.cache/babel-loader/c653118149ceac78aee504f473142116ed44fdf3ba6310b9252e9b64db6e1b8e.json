{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import MovieCard from\"./MovieCard\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_KEY=\"a75f185e68cae04a6d218be886d02a01\";const BASE_URL=\"https://api.themoviedb.org/3\";const IMG_BASE_URL=\"https://image.tmdb.org/t/p/w500\";function App(){const[movies,setMovies]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[searchQuery,setSearchQuery]=useState(\"\");const[sortOption,setSortOption]=useState(\"\");useEffect(()=>{fetchMovies();// eslint-disable-next-line\n},[currentPage,searchQuery,sortOption]);const fetchMovies=async()=>{let endpoint=\"\";if(searchQuery){endpoint=\"\".concat(BASE_URL,\"/search/movie?api_key=\").concat(API_KEY,\"&query=\").concat(encodeURIComponent(searchQuery),\"&page=\").concat(currentPage);}else{const sortBy=sortOption||\"popularity.desc\";endpoint=\"\".concat(BASE_URL,\"/discover/movie?api_key=\").concat(API_KEY,\"&sort_by=\").concat(sortBy,\"&page=\").concat(currentPage);}try{const response=await fetch(endpoint);const data=await response.json();if(data.results&&data.results.length>0){setMovies(data.results);setTotalPages(data.total_pages);}else{setMovies([]);}}catch(error){console.error(\"Error fetching movies:\",error);}};const handleSearchChange=e=>{setSearchQuery(e.target.value.trim());setCurrentPage(1);};const handleSortChange=e=>{setSortOption(e.target.value);setCurrentPage(1);};const handlePrevPage=()=>{if(currentPage>1)setCurrentPage(currentPage-1);};const handleNextPage=()=>{if(currentPage<totalPages)setCurrentPage(currentPage+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Movie Explorer\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for a movie...\",value:searchQuery,onChange:handleSearchChange}),/*#__PURE__*/_jsxs(\"select\",{value:sortOption,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sort By\"}),/*#__PURE__*/_jsx(\"option\",{value:\"release_date.asc\",children:\"Release Date (Asc)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"release_date.desc\",children:\"Release Date (Desc)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vote_average.asc\",children:\"Rating (Asc)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vote_average.desc\",children:\"Rating (Desc)\"})]})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{id:\"movieContainer\",className:\"movie_grid\",children:movies.length>0?movies.map(movie=>/*#__PURE__*/_jsx(MovieCard,{title:movie.title,releaseDate:movie.release_date,rating:movie.vote_average,poster:movie.poster_path?\"\".concat(IMG_BASE_URL).concat(movie.poster_path):\"https://via.placeholder.com/300x450?text=No+Image\"},movie.id)):/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",width:\"100%\"},children:\"No movies found.\"})})}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{id:\"page_number\",children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:currentPage===totalPages,children:\"Next\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","MovieCard","jsx","_jsx","jsxs","_jsxs","API_KEY","BASE_URL","IMG_BASE_URL","App","movies","setMovies","currentPage","setCurrentPage","totalPages","setTotalPages","searchQuery","setSearchQuery","sortOption","setSortOption","fetchMovies","endpoint","concat","encodeURIComponent","sortBy","response","fetch","data","json","results","length","total_pages","error","console","handleSearchChange","e","target","value","trim","handleSortChange","handlePrevPage","handleNextPage","className","children","type","placeholder","onChange","id","map","movie","title","releaseDate","release_date","rating","vote_average","poster","poster_path","style","textAlign","width","onClick","disabled"],"sources":["/home/manraj/CPSC_349/Homework3/movie_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MovieCard from \"./MovieCard\";\nimport \"./App.css\";\n\nconst API_KEY = \"a75f185e68cae04a6d218be886d02a01\";\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst IMG_BASE_URL = \"https://image.tmdb.org/t/p/w500\";\n\nfunction App() {\n  const [movies, setMovies] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [sortOption, setSortOption] = useState(\"\");\n\n  useEffect(() => {\n    fetchMovies();\n    // eslint-disable-next-line\n  }, [currentPage, searchQuery, sortOption]);\n\n  const fetchMovies = async () => {\n    let endpoint = \"\";\n\n    if (searchQuery) {\n      endpoint = `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(\n        searchQuery\n      )}&page=${currentPage}`;\n    } else {\n      const sortBy = sortOption || \"popularity.desc\";\n      endpoint = `${BASE_URL}/discover/movie?api_key=${API_KEY}&sort_by=${sortBy}&page=${currentPage}`;\n    }\n\n    try {\n      const response = await fetch(endpoint);\n      const data = await response.json();\n\n      if (data.results && data.results.length > 0) {\n        setMovies(data.results);\n        setTotalPages(data.total_pages);\n      } else {\n        setMovies([]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching movies:\", error);\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value.trim());\n    setCurrentPage(1);\n  };\n\n  const handleSortChange = (e) => {\n    setSortOption(e.target.value);\n    setCurrentPage(1);\n  };\n\n  const handlePrevPage = () => {\n    if (currentPage > 1) setCurrentPage(currentPage - 1);\n  };\n\n  const handleNextPage = () => {\n    if (currentPage < totalPages) setCurrentPage(currentPage + 1);\n  };\n\n  return (\n    <div className=\"app-container\">\n      <header>\n        <h1>Movie Explorer</h1>\n      </header>\n\n      <div className=\"controls\">\n        <input\n          type=\"text\"\n          placeholder=\"Search for a movie...\"\n          value={searchQuery}\n          onChange={handleSearchChange}\n        />\n        <select value={sortOption} onChange={handleSortChange}>\n          <option value=\"\">Sort By</option>\n          <option value=\"release_date.asc\">Release Date (Asc)</option>\n          <option value=\"release_date.desc\">Release Date (Desc)</option>\n          <option value=\"vote_average.asc\">Rating (Asc)</option>\n          <option value=\"vote_average.desc\">Rating (Desc)</option>\n        </select>\n      </div>\n\n      <main>\n        <div id=\"movieContainer\" className=\"movie_grid\">\n          {movies.length > 0 ? (\n            movies.map((movie) => (\n              <MovieCard\n                key={movie.id}\n                title={movie.title}\n                releaseDate={movie.release_date}\n                rating={movie.vote_average}\n                poster={\n                  movie.poster_path\n                    ? `${IMG_BASE_URL}${movie.poster_path}`\n                    : \"https://via.placeholder.com/300x450?text=No+Image\"\n                }\n              />\n            ))\n          ) : (\n            <p style={{ textAlign: \"center\", width: \"100%\" }}>\n              No movies found.\n            </p>\n          )}\n        </div>\n      </main>\n\n      <footer>\n        <button onClick={handlePrevPage} disabled={currentPage === 1}>\n          Previous\n        </button>\n        <span id=\"page_number\">\n          Page {currentPage} of {totalPages}\n        </span>\n        <button onClick={handleNextPage} disabled={currentPage === totalPages}>\n          Next\n        </button>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnB,KAAM,CAAAC,OAAO,CAAG,kCAAkC,CAClD,KAAM,CAAAC,QAAQ,CAAG,8BAA8B,CAC/C,KAAM,CAAAC,YAAY,CAAG,iCAAiC,CAEtD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACiB,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACdoB,WAAW,CAAC,CAAC,CACb;AACF,CAAC,CAAE,CAACR,WAAW,CAAEI,WAAW,CAAEE,UAAU,CAAC,CAAC,CAE1C,KAAM,CAAAE,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAAAC,QAAQ,CAAG,EAAE,CAEjB,GAAIL,WAAW,CAAE,CACfK,QAAQ,IAAAC,MAAA,CAAMf,QAAQ,2BAAAe,MAAA,CAAyBhB,OAAO,YAAAgB,MAAA,CAAUC,kBAAkB,CAChFP,WACF,CAAC,WAAAM,MAAA,CAASV,WAAW,CAAE,CACzB,CAAC,IAAM,CACL,KAAM,CAAAY,MAAM,CAAGN,UAAU,EAAI,iBAAiB,CAC9CG,QAAQ,IAAAC,MAAA,CAAMf,QAAQ,6BAAAe,MAAA,CAA2BhB,OAAO,cAAAgB,MAAA,CAAYE,MAAM,WAAAF,MAAA,CAASV,WAAW,CAAE,CAClG,CAEA,GAAI,CACF,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACL,QAAQ,CAAC,CACtC,KAAM,CAAAM,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,OAAO,EAAIF,IAAI,CAACE,OAAO,CAACC,MAAM,CAAG,CAAC,CAAE,CAC3CnB,SAAS,CAACgB,IAAI,CAACE,OAAO,CAAC,CACvBd,aAAa,CAACY,IAAI,CAACI,WAAW,CAAC,CACjC,CAAC,IAAM,CACLpB,SAAS,CAAC,EAAE,CAAC,CACf,CACF,CAAE,MAAOqB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAIC,CAAC,EAAK,CAChClB,cAAc,CAACkB,CAAC,CAACC,MAAM,CAACC,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CACrCzB,cAAc,CAAC,CAAC,CAAC,CACnB,CAAC,CAED,KAAM,CAAA0B,gBAAgB,CAAIJ,CAAC,EAAK,CAC9BhB,aAAa,CAACgB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7BxB,cAAc,CAAC,CAAC,CAAC,CACnB,CAAC,CAED,KAAM,CAAA2B,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI5B,WAAW,CAAG,CAAC,CAAEC,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CACtD,CAAC,CAED,KAAM,CAAA6B,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI7B,WAAW,CAAGE,UAAU,CAAED,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CAC/D,CAAC,CAED,mBACEP,KAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxC,IAAA,WAAAwC,QAAA,cACExC,IAAA,OAAAwC,QAAA,CAAI,gBAAc,CAAI,CAAC,CACjB,CAAC,cAETtC,KAAA,QAAKqC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBxC,IAAA,UACEyC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,uBAAuB,CACnCR,KAAK,CAAErB,WAAY,CACnB8B,QAAQ,CAAEZ,kBAAmB,CAC9B,CAAC,cACF7B,KAAA,WAAQgC,KAAK,CAAEnB,UAAW,CAAC4B,QAAQ,CAAEP,gBAAiB,CAAAI,QAAA,eACpDxC,IAAA,WAAQkC,KAAK,CAAC,EAAE,CAAAM,QAAA,CAAC,SAAO,CAAQ,CAAC,cACjCxC,IAAA,WAAQkC,KAAK,CAAC,kBAAkB,CAAAM,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cAC5DxC,IAAA,WAAQkC,KAAK,CAAC,mBAAmB,CAAAM,QAAA,CAAC,qBAAmB,CAAQ,CAAC,cAC9DxC,IAAA,WAAQkC,KAAK,CAAC,kBAAkB,CAAAM,QAAA,CAAC,cAAY,CAAQ,CAAC,cACtDxC,IAAA,WAAQkC,KAAK,CAAC,mBAAmB,CAAAM,QAAA,CAAC,eAAa,CAAQ,CAAC,EAClD,CAAC,EACN,CAAC,cAENxC,IAAA,SAAAwC,QAAA,cACExC,IAAA,QAAK4C,EAAE,CAAC,gBAAgB,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,CAC5CjC,MAAM,CAACoB,MAAM,CAAG,CAAC,CAChBpB,MAAM,CAACsC,GAAG,CAAEC,KAAK,eACf9C,IAAA,CAACF,SAAS,EAERiD,KAAK,CAAED,KAAK,CAACC,KAAM,CACnBC,WAAW,CAAEF,KAAK,CAACG,YAAa,CAChCC,MAAM,CAAEJ,KAAK,CAACK,YAAa,CAC3BC,MAAM,CACJN,KAAK,CAACO,WAAW,IAAAlC,MAAA,CACVd,YAAY,EAAAc,MAAA,CAAG2B,KAAK,CAACO,WAAW,EACnC,mDACL,EARIP,KAAK,CAACF,EASZ,CACF,CAAC,cAEF5C,IAAA,MAAGsD,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAhB,QAAA,CAAC,kBAElD,CAAG,CACJ,CACE,CAAC,CACF,CAAC,cAEPtC,KAAA,WAAAsC,QAAA,eACExC,IAAA,WAAQyD,OAAO,CAAEpB,cAAe,CAACqB,QAAQ,CAAEjD,WAAW,GAAK,CAAE,CAAA+B,QAAA,CAAC,UAE9D,CAAQ,CAAC,cACTtC,KAAA,SAAM0C,EAAE,CAAC,aAAa,CAAAJ,QAAA,EAAC,OAChB,CAAC/B,WAAW,CAAC,MAAI,CAACE,UAAU,EAC7B,CAAC,cACPX,IAAA,WAAQyD,OAAO,CAAEnB,cAAe,CAACoB,QAAQ,CAAEjD,WAAW,GAAKE,UAAW,CAAA6B,QAAA,CAAC,MAEvE,CAAQ,CAAC,EACH,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAAlC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}